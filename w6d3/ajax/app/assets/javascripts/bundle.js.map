{"version":3,"sources":["webpack/bootstrap 9d4abd38971b60136048","./frontend/twitter.js","./frontend/follow_toggle.js","./frontend/api_util.js","./frontend/user_search.js","./frontend/tweet_compose.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AC7DA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;ACzBA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC5CA;;AAEA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,iBAAiB;;AAEjB,8BAA8B,UAAU;AACxC;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,uBAAuB;;AAEvB,yBAAyB;AACzB;AACA;AACA;AACA,iCAAiC,cAAc;AAC/C;AACA;AACA,yBAAyB;AACzB,uBAAuB;AACvB,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;;;AAGA;;AAEA;;;;;;;AC1CA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yBAAyB,QAAQ,GAAG,cAAc;AAClD;AACA,qBAAqB;AACrB;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;;;;;;AC9BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mCAAmC,aAAa,GAAG,mBAAmB;AACtE;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,6BAA6B,KAAK;AAClC;AACA;;AAEA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9d4abd38971b60136048","const FollowToggle = require(\"./follow_toggle.js\");\nconst UserSearch = require(\"./user_search.js\");\nconst TweetCompose = require(\"./tweet_compose.js\");\n\n$(()=>{\n  setFollows();\n  setSearch();\n  setForm();\n});\n\nfunction setFollows(){\n  let $allFollows = $('.follow-toggle');\n  let followObjs = [];\n  $allFollows.each(function(){\n    let obj = new FollowToggle(this);\n    followObjs.push(obj);\n  });\n}\n\nfunction setSearch(){\n  let search = new UserSearch($(\".user-search\"));\n}\n\nfunction setForm(){\n  new TweetCompose();\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./frontend/twitter.js\n// module id = 0\n// module chunks = 0","const APIUtil = require(\"./api_util.js\");\n\n\nclass FollowToggle{\n  constructor(el, options){\n    this.el = $(el);\n    this.userId = this.el.data('userid') || options.userId;\n    this.followed = this.el.data('followed') || options.followState;\n    this.el.on('click', this.handleClick.bind(this));\n    this.render();\n  }\n  render(){\n    if (this.followed){\n      this.el.html(\"Unfollow\");\n    }\n    else{\n      this.el.html(\"Follow\");\n    }\n  }\n\n  handleClick(e){\n    this.disable();\n    e.preventDefault();\n    if (this.followed){\n      APIUtil.unfollowUser.call(this, this.userId).then(this.toggleState.bind(this));\n    } else{\n      APIUtil.followUser(this.userId).then(this.toggleState.bind(this));\n    }\n  }\n\n  toggleState(){\n    this.followed = !this.followed;\n    this.render();\n    this.enable();\n  }\n\n  disable(){\n    this.el.attr('disabled', true);\n  }\n  enable(){\n    this.el.attr('disabled', false);\n  }\n}\n\nmodule.exports = FollowToggle;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./frontend/follow_toggle.js\n// module id = 1\n// module chunks = 0","const APIUtil = {\n\nfollowUser: id=> {return $.ajax({\n                    type: 'post',\n                    url: \"/users/\"+id+\"/follow\",\n                    dataType: 'json',\n                    success: (resp) => console.log(\"resp\"),\n                    error: () => console.log(\"ERROR w/ request\")\n                  });\n                },\n\n  unfollowUser: function(id) { debugger; return $.ajax({\n                          type: 'delete',\n                          url: \"/users/\"+id+\"/follow\",\n                          dataType: 'json',\n                          success: (resp) => console.log(\"resp\"),\n                          error: () => console.log(\"ERROR w/ request\")\n                        });\n                      },\n\n  searchUsers: query => {return $.ajax({\n                          type: 'get',\n                          url: '/users/search',\n                          dataType: 'json',\n                          data: {'query':query},\n                          success: (data) => console.log(data ),\n                          error: (e) => console.log(e)\n                        });\n                      },\n  createTweet: tweet => {return $.ajax({\n                          type: 'post',\n                          url: '/tweets',\n                          dataType: 'json',\n                          data: tweet,\n                          success: (data) => console.log(data),\n                          error: (e) => console.log(e)\n                        });\n                      }\n\n\n};\n\nmodule.exports = APIUtil;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./frontend/api_util.js\n// module id = 2\n// module chunks = 0","const APIUtil = require(\"./api_util.js\");\nconst FollowToggle = require(\"./follow_toggle.js\");\n\nclass UserSearch{\n  constructor(el){\n    this.el = $(el);\n    this.ul = this.el.find('ul');\n    this.input = this.el.find('input');\n\n    this.input.on(\"input\", this.search.bind(this));\n  }\n\n  search(e){\n    APIUtil.searchUsers(e.target.value).then(this.populateResults.bind(this));\n  }\n\n  populateResults(data){\n    this.ul.children().remove();\n    data.forEach( (user)=>{\n      let li = $(\"<li></li>\");\n      li.html(`<a href=${user.id}>${user.username}</a>`);\n      let followButton = $('<button class=\"follow-toggle\"></button>');\n      let options = {userId: user.id, followState: user.followed};\n      new FollowToggle(followButton, options);\n      li.append(followButton);\n      this.ul.append(li);\n    });\n  }\n}\n\nmodule.exports = UserSearch;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./frontend/user_search.js\n// module id = 3\n// module chunks = 0","const APIUtil = require(\"./api_util.js\");\n\nclass TweetCompose{\n  constructor(){\n    this.form = $(\".tweet-compose\");\n    this.form.on('submit', this.handleSubmit.bind(this));\n    let textarea = this.form.find('textarea');\n    textarea.on('input', this.updateChars.bind(this));\n  }\n  handleSubmit(e){\n    e.preventDefault();\n    this.form.find('input').attr('disabled', true);\n    let contents = this.form.serializeJSON();\n    APIUtil.createTweet(contents)\n      .then(this.renderTweet.bind(this))\n      .always(this.reenable.bind(this));\n  }\n\n  renderTweet(data){\n    this.form.find('textarea').val(\"\");\n    let tweet = $(\"<li></li>\");\n    tweet.append(data.content+ \" -- \");\n    tweet.append(`<a href=/users/${data.user.id}>${data.user.username}</a> -- `);\n    tweet.append(data.created_at);\n    let feed = this.form.data('tweets-ul');\n    $(feed).prepend(tweet);\n  }\n\n  reenable(){\n    this.form.find('input').attr('disabled', false);\n  }\n\n  updateChars(e){\n    const chars = 140;\n    let left = chars - $(e.target).val().length;\n    $('.chars-left').html(`${left} characters left`);\n  }\n}\n\nmodule.exports = TweetCompose;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./frontend/tweet_compose.js\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}